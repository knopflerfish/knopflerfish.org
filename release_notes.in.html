<!-- The first line in this file is used by the desktop to check -->
<!-- for new releases, i.e., do not change its format.           -->
<!-- It must contain the word "Knopflerfish" followed by a space -->
<!-- and then the version followed by another space.             -->

<h1 class="kf">Release Notes Knopflerfish $(VERSION) (OSGi R5)</h1>
<p>

  Maintenance release of Knopflerfish 5 available from
  $(BASE_URL)/$(VERSION). Released $(RELEASE_DATE).

</p>
<p>

  Knopflerfish 5 is an implementation of the "OSGi Service Platform
  Release 5". It contains all services specified in the "Core
  Specification" and most of the non Enterprise Edition related
  services specified in the "Compendium Specification".

</p>

<p>

  The Release Notes include all new features & changes for
  Knopflerfish $(VERSION) compared to the release of Knopflerfish
  $(VERSION_PREV).

</p>

<h2 class="filled">Knopflerfish Framework - OSGi Core Specification</h2>
<div class="release_notes">

  <div class="note_group">
    <div class="note_name">Framework 7.2.4</div>
    <div class="note_item">
    Fixed so optional imports in fragment bundles do not block attach
    to resolved fragment hosts.
    </div>
    <div class="note_item">
    Updated resolve process so that it can find and attach fragments that
    adds new export packages.
    </div>
    <div class="note_name">Framework 7.2.3</div>
    <div class="note_item">
    Fixed so that we can use security manager without persistent storage
    (e.g. read-only mode).
    </div>
    <div class="note_name">Framework 7.2.2</div>
    <div class="note_item">
    Added missing check in resolver, caused the resolver under certain conditions
    to go into an infinite loop when a bundle wasn't resolvable.
    </div>
    <div class="note_name">Framework 7.2.1</div>
    <div class="note_item">
    Added some packages from org.apache.commons... to be exported package
    on Android systems by default.
    </div>
    <div class="note_item">
    Set default value to true for the property 
    <code>org.knopflerfish.framework.is_doublechecked_locking_safe</code>
    on Android systems.
    </div>
  </div>

</div>


<h2 class="filled">OSGi Compendium Specification</h2>
<div class="release_notes">

  <div class="note_group">
    <div class="note_name">CM 5.0.2</div>
    <div class="note_item">
      Fixed race condition that could cause a NullPointerException in
      ConfigurationAdminFactory.createEvent().
    </div>
  </div>

  <div class="note_group">
    <div class="note_name">HTTP 5.1.2</div>
    <div class="note_item">
      Removed debug printout that incorrectly indicated a NPE problem.
    </div>
    <div class="note_item">
      HttpServletResponse.getLocale() incorrectly returned null if no locale had been set.
      Corrected to return the default locale.
    </div>
    <div class="note_name">HTTP 5.1.1</div>
    <div class="note_item">
      Corrected issues in the HttpServletRequest class. Some methods
      caused NPE or gave incorrect results during the second GET call in a Keep-Alive connection. Methods affected: getLocalAddr(), getLocalName(), getRemteAddr(), getRemoteHost(), getLocalPort(), getRemotePort().
    </div>
  </div>

</div>


<h2 class="filled">Knopflerfish Services</h2>
<div class="release_notes">

  <div class="note_group">
    <div class="note_name">HttpClientConnector 3.1.3.kf5-001</div>
    <div class="note_item">
    Re-packaged the bundle to avoid classloader problems on Android systems.
    </div>
    <div class="note_item">
    Export org.apache.commons.codec packages.
    </div>
  </div>

</div>


<h2 class="filled">Misc, start scripts, build system etc </h2>
<div class="release_notes">

  <div class="note_group">
    <div class="note_name">BundleDexifier 1.0.0</div>
    <div class="note_item">
    Added version number to bundledexifier.
    </div>
    <div class="note_item">
    Don't add classes.dex when bundle doesn't contain java classes.
    </div>
  </div>

  <div class="note_group">
    <div class="note_name">junit 3.8.1.kf4-003</div>
    <div class="note_item">
      Corrected issue with published JUntiResult being included every test suite result even they were not related.
    </div>

    <div class="note_name">junit 3.8.1.kf4-002</div>
    <div class="note_item">
      New support interface for distributed testing and publishing JUnitTestResults services in the registry.
      The junit bundle will after the test run collect these publish results and include them in the xml test result output.
    </div>
  </div>

  <div class="note_group">
    <div class="note_name">junit_runner 4.1.0</div>
    <div class="note_item">
      Updated xsl for handling collected test results originating from published JUnitTestResult services.
    </div>
  </div>

  <div class="note_group">
    <div class="note_name">http_servlet_test 1.1.0</div>
    <div class="note_item">
      Update to use HttpClient / httpclient_connector for all request testing. More test cases added.
    </div>
    
    <div class="note_name">http_servlet_test 1.0.0</div>
    <div class="note_item">
      New regression test: http_servlet_test for testing the Servlet API from within a test servlet,
      running inside the KF HTTP server,
    </div>
  </div>
  

</div>
