<?xml version="1.0"?>

<!DOCTYPE project [
  <!ENTITY bundlebuild_include  SYSTEM "../../../ant/bundlebuild_include.xml">
]>

<project name="sslj2sp" default="all">

  <property name="topdir"       location="../.."/>

  <property name = "ee.check.foundation"   value = "false"/>

  <property name = "do.bundle.custom.pre"  value="true"/>
  <property name = "do.bundle.custom.post" value="true"/>

  <property name = "bundle.build.api"      value = "false"/>
  <property name = "bundle.build.impl"     value = "true"/>
  <property name = "bundle.build.lib"      value = "false"/>
  <property name = "bundle.build.all"      value = "false"/>

  <property name="impl.pattern"            value="org/knopflerfish/**/*"/>
  <property name="resources.dir"           value="resources"/>

  <path id="bundle.compile.path">
   <pathelement location="${topdir}/jars/cm/cm_api-2.0.0.jar"/>
   <pathelement location="${topdir}/jars/log/log_api-2.0.0.jar"/>
  </path>

  <!-- want to include the log client w/o duplicating code -->
  <target name="bundle.custom.pre">
    <mkdir dir="src/org/knopflerfish/service/log"/>
    <copy todir="src/org/knopflerfish/service/log">
      <fileset dir="${topdir}/bundles/log/src/org/knopflerfish/service/log" />
    </copy>
  </target>

  <!-- need to undo the bundle.custom.pre step and do not want to -->
  <!-- overwrite clean -->
  <target name="bundle.custom.post">
    <delete dir="src/org/knopflerfish/service"
            quiet="true"
	    failonerror="false" />
  </target>

  &bundlebuild_include;

</project>

