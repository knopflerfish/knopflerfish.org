<!-- The first line in this file is used by the desktop to check -->
<!-- for new releases, i.e., do not change its format.           -->
<!-- It must contain the word "Knopflerfish" followed by a space -->
<!-- and then the version followed by another space.             -->

<h1 class="kf">Release Notes Knopflerfish $(VERSION) (OSGi R5)</h1>
<p>
  First release of Knopflerfish 5 available from
  $(BASE_URL)/$(VERSION). Released $(RELEASE_DATE).
</p>
<p>
  Knopflerfish 5 is an implementation of the "OSGi Service Platform
  Release 5". It contains all services specified in the
  "Core Specification" and most of the non Enterprise Edition related
  services specified in the "Compendium Specification".
</p>
<p>
  The Release Notes include all new features & changes for 
  Knopflerfish $(VERSION) compared to the release of Knopflerfish
  $(VERSION_PREV).
</p>

<h2 class="kf">OSGi Release 5 - What is New?</h2>
<div class="release_notes">
  <p>
    Below is a short summary of the most important new features in OSGi R5
    Core and Compendium.
  </p>
  <div class="note_group">
    <div class="note_name"> Resource API </div>
    <div class="note_item">
    An API for the generic Requirement-Capability model. This API is not
    used directly by the Framework, the purpose of specifying this base API
    is to allow it to be used as building block for other specifications.
    </div>
  </div>
  <div class="note_group">
    <div class="note_name"> VersionRange class </div>
    <div class="note_item">
    OSGi standard class for handling OSGi version ranges.
    </div>
  </div>
  <div class="note_group">
    <div class="note_name"> OSGi Namespaces </div>
    <div class="note_item">
    A key aspect of the OSGi dependency model based on requirements and
    capabilities is the concept of a namespace. A Namespace defines the
    semantics of a Requirement-Capability pair. New namespace defined in
    R5 are osgi.content, osgi.contract, osgi.extender, osgi.identity,
    osgi.service and osgi.serviceloader.
    </div>
  </div>
  <div class="note_group">
    <div class="note_name"> Repository Service Specification </div>
    <div class="note_item">
    New specification that specifies the Repository Service that provides
    the capability to manage the external access to components and other
    resources.
    </div>
  </div>
  <div class="note_group">
    <div class="note_name"> Service Loader Mediator Specification </div>
    <div class="note_item">
    New specification that defines a mediator that ensures that services
    that uses the Java Service Loader model is useful in an OSGi Framework.
    </div>
  </div>
  <div class="note_group">
    <div class="note_name"> Subsystem Service Specification </div>
    <div class="note_item">
    The framework provides hooks for influencing resolution, and access to
    bundles and services. These framework hooks may be used to implement
    scoping for a collection of bundles. The Subsystems specification
    provides a higher-level declarative model for defining scoping for
    collections of resources, including bundles.
    </div>
  </div>
  <div class="note_group">
    <div class="note_name"> Resolver Service Specification </div>
    <div class="note_item">
    A new service that can be the base for provisioning, deployment,
    build, and diagnostic tooling. The service can take a requirement
    and resolve it to a wiring of resources.
    </div>
  </div>
  <div class="note_group">
    <div class="note_name"> Updated Configuration Admin Service Specification </div>
    <div class="note_item">
    A new method <code>Configuration.getChangeCount()</code>.
    </div>
    <div class="note_item">
    New listener interface
	<code>SynchronousConfigurationListener</code>.
    </div>
    <div class="note_item">
    New concept Targeted PIDs. The target PID scopes the applicability
    of a configuration to a limited set of target bundle based on
    PID, Bundle-Symbolic-Name, Version and Location. 
    </div>
  </div>
</div>


<h2 class="kf">Knopflerfish Framework - OSGi Core Specification</h2>
<div class="release_notes">

  <div class="note_group">
    <div class="note_name">OSGi R5 specification</div>
    <div class="note_item">
      All the Core Specification Services and API:s are included and are
      designed to be compliant with the OSGi R5 specification.
      Please refer to the <a href="components.html">Contents</a> page for
      a more detailed description of news in R5 and KF5 implementation status.
    </div>
  <div class="note_group">
    <div class="note_name"> Framework 7.0.0</div>
    <div class="note_item">
      Unified API version handling. API version are now read from the
      <tt>packageinfo</tt> file in API source directory.
    </div>
    <div class="note_item">
      Updated API:s and behaviour to be compliant with OSGi R5 specification.
    </div>
  </div>
</div>


<h2 class="kf">OSGi Compendium Specification</h2>
<div class="release_notes">

  <div class="note_group">
    <div class="note_name">Blueprint 5.0.0</div>
    <div class="note_item">
      Update (micro version) of OSGi packages. 
    </div>
  </div>
  
  <div class="note_group">
    <div class="note_name">CM 5.0.0</div>
    <div class="note_item">
      Updated according to the OSGi Componedium R5 specification.
    </div>
  </div>
  
  <div class="note_group">
    <div class="note_name">DMT 5.0.0</div>
    <div class="note_item">
      Update (micro version) of OSGi packages. 
    </div>
  </div>
  
  <div class="note_group">
    <div class="note_name">KF-XML-Metatype 5.0.0</div>
    <div class="note_item">
      The default values for an attribute definition is now validated
      against the set of allowed option values when option values are
      defined. Any default value that is not a valid option value will
      be ignored.
    </div>
  </div>
  
   </div>
    <div class="note_group">
    <div class="note_name">SCR(component) 5.0.0</div>
    <div class="note_item">
      Updated API micro version to 1.2.1 because of added
      generics types to methods. 
    </div>
    <div class="note_item">
      Updated CM handling to handle targeted PIDs that
      was introduced in Configuration Admin(CM) 5.0.0.
    </div>
  </div>

  <div class="note_group">
    <div class="note_name">WireAdmin 5.0.0</div>
    <div class="note_item">
      Update (micro version) of OSGi packages. 
    </div>

</div>

<h2 class="kf">Knopflerfish Services</h2>
<div class="release_notes">

  <div class="note_group">
    <div class="note_name">CM-Commands 5.0.0</div>
    <div class="note_item">

      Updated to require and use the Configuration Admin version 1.5.
      I.e., 
      <ul>
	<li>Presents the change count when showing a configuration,

        <li>uses the change count to detect if a save will overwrite
	    changes to the configuration done by some other management
	    agent.
      </ul>

    </div>
    <div class="note_item">

      The <code>create</code> command has been extended to take the
      PID of a configuration used as template for the new
      configuration. This command now also check that the new PID is
      not already in use.

    </div>
    <div class="note_item">

      The <code>show</code> and the <code>current</code> commands has
      a new option, <code>-t</code> that when present includes the
      type of each property in the printout.

    </div>
  </div>
  
  <div class="note_group">
    <div class="note_name">CM-Desktop 5.0.0</div>
    <div class="note_item">

      Updated to require and use the Configuration Admin version 1.5.
      I.e., 
      <ul>
	<li> Works with configurations using targeted PIDs.
      </ul>

    </div>
    <div class="note_item">

      The user interface has been rewritten to support targeted PIDs
      and to increase performance by reducing the number of Swing
      components it uses and updates when a configuration is updated.

    </div>
    <div class="note_item">

      Buttons in the GUI is now made inactive (disabled) when they do
      not have a function (previously they where made invisible).

    </div>
    <div class="note_item">

      The page shown when no bundle is selected or when a bundle
      without meta type information is selected now lists all bundles
      that provides metatype information. This page also provides an
      import-button for importing cm_data XML documents (that can be
      created by the export button on the page for an individual
      configuration).

    </div>
    <div class="note_item">

      This bundle can now use any MetaTypeService service. I.e., it no
      longer requires the SystemMetattypeProvider service provided by
      the kf_metatype-bundle.

    </div>
    <div class="note_item">

      Uses the new functionality provided by Desktop 5.0 to avoid
      updating the displayer when not visible.

    </div>
  </div>
  
  <div class="note_group">
    <div class="note_name">Desktop 5.0.0</div>
    <div class="note_item">

      Added support for external bundles that registers detail
      displayers to support lazy updates, i.e., only update the
      displayer views when the displayer is visible in the tabbed pane
      it lives in. A displayer that wants to use this feature must
      implement the new interface,
      <code>org.knopflerfish.service.desktop.SelectionAware</code>.
      
    </div>
  </div>
  
  <div class="note_group">
    <div class="note_name">Xerces 2.10.1.kf5</div>
    <div class="note_item">
      This bundle now imports and exports the
      <code>org.osgi.util.xml</code> package.
    </div>
  </div>

</div>


<h2 class="kf">Misc, start scripts, build system etc </h2>
<div class="release_notes">

  <div class="note_group">
  </div>

</div>
