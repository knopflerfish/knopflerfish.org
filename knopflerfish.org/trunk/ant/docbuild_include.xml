<project name="docbuild" basedir=".">

  <dirname property="docbuild.basedir" file="${ant.file.docbuild}"/>

  <target name="build_doc"
	  description="Builds user or bundle doc">
    <taskdef name      = "makehtml"
 	     classpath = "${docbuild.basedir}/classes"
             classname = "org.knopflerfish.ant.taskdefs.bundle.MakeHTMLTask"/>

    <!-- Default out dir -->
    <property name="docbuild.outdir"
	      location="${docbuild.basedir}/../osgi/out/doc/${docbuild.name}"/>

    <makehtml title="${docbuild.title}"
              description="${docbuild.description}"
              template="${docbuild.basedir}/html_template/bundledoc_ext.html"
              outdir="${docbuild.outdir}">
      <fileset dir="${docbuild.fromdir}">
	<include name="**/*.html"/>
      </fileset>
    </makehtml>
    <copy todir="${docbuild.outdir}">
      <fileset dir="${docbuild.fromdir}">
	<exclude name="**/*.html"/>
      </fileset>
    </copy>
  </target>
</project>
