<!-- The first line in this file is used by the desktop to check -->
<!-- for new releases, i.e., do not change its format.           -->
<!-- It must contain the word "Knopflerfish" followed by a space -->
<!-- and then the version followed by another space.             -->

<h1 class="kf">Release Notes Knopflerfish $(VERSION) (OSGi R5)</h1>
<p>

  Maintenance release of Knopflerfish 5 available from
  $(BASE_URL)/$(VERSION). Released $(RELEASE_DATE).

</p>
<p>

  Knopflerfish 5 is an implementation of the "OSGi Service Platform
  Release 5". It contains all services specified in the "Core
  Specification" and most of the non Enterprise Edition related
  services specified in the "Compendium Specification".

</p>

<p>

  The Release Notes include all new features & changes for
  Knopflerfish $(VERSION) compared to the release of Knopflerfish
  $(VERSION_PREV).

</p>

<h2 class="filled">Knopflerfish Framework - OSGi Core Specification</h2>
<div class="release_notes">

  <div class="note_group">
    <div class="note_name">Framework 7.2.0</div>
    <div class="note_item">
    New improved support for Android DEX files.
    Now we follow the Bundle-Classpath.
    You no longer need to include the *.class files.
    </div>
    <div class="note_item">
    Fixed NPE which could happen we doing a dynamic import.
    </div>
    <div class="note_name">Framework 7.1.4</div>
    <div class="note_item">
    Fixed NPE during package resolving.
    </div>
    <div class="note_name">Framework 7.1.3</div>
    <div class="note_item">
    Fixed native code checking before we attach fragment.
    </div>
    <div class="note_item">
    Changed behaviour start-up of start-level service, so that always
    goes to beginning start-level instead of last active start-level
    from previous run. This to comply with the OSGi Core specification.
    </div>
    <div class="note_item">
    Removed limit on number of queued start-level operations (was 100).
    </div>
  </div>

</div>


<h2 class="filled">OSGi Compendium Specification</h2>
<div class="release_notes">

  <div class="note_group">
    <div class="note_name">UserAdmin 4.1.2</div>
    <div class="note_item">
    Fixed so it runs under Dalvik that lacks Security support.
    </div>

  <div class="note_group">
    <div class="note_name">HTTP Server 5.1.0</div>
    <div class="note_item">
      HTTP server refactoring making the HTTP server use less resources (threads and memory).
    </div>
    <div class="note_item">
      New HTTP server thread pool. The maximum number of threads and threads keeping open, or "Keep-Alive"
      connections  can be tuned via two new system properties: <code>org.knopflerfish.http.threads.max</code>
      and <code>org.knopflerfish.http.threads.keep_alive</code>
    </div>
    <div class="note_item">
      HTTP server supports and uses chunked transfer encoding by default
    </div>
    <div class="note_item">
      Minor corrections to be more HTTP/1.1 conformant. E.g. not sending "Connection: Keep-Alive" to
      an HTTP/1.1 client, but rather only sending "Connection: close" when actually closing the connection
    </div>
    <div class="note_item">
      Support for automatic compressing of content. This is controlled via the property:
      <code>org.knopflerfish.http.always_compress.mime_types</code>. Content with a mime type specified by this
      comma separated list will always be compressed by the container.
      Specifying just the type and leaving out the subtype will apply compression to all subtypes.
      E.g. "text" will apply compression to text/html, text/plain etc. "text" is the default value.
    </div>
    <div class="note_name">HTTP Server 5.0.0</div>
    <div class="note_item">
    Improved the configuration handling the first time a CM
    configuration is received to avoid unnecessary reconfigurations of
    the built-in default setings. This could lead to a server socket
    close followed by new listen on the same port.
    </div>
    <div class="note_item">
    CM meta-data is updated to include previously undocumented configuration parameters.
    </div>
  </div>


<h2 class="filled">Knopflerfish Services</h2>
<div class="release_notes">


</div>


<h2 class="filled">Misc, start scripts, build system etc </h2>
<div class="release_notes">

  <div class="note_group">
    <div class="note_name">Build files</div>
    <div class="note_item">
    The Android build system has been updated. Built Android/DEX bundles
    will be placed in the "dex_jars" directory. The Android/DEX framework
    will be called  "framework.dex.jar".
    Building dex jars is enabled by setting the property "ANDROID_HOME".
    Already built bundles can be dexified by calling the ant target "dex_jars".
    </div>
    <div class="note_item">
    The build files under "tools/android" has been updated to use the new build environment.
    </div>
  </div>

  <div class="note_group">
    <div class="note_name">*.xargs files</div>
    <div class="note_item">
    Updated according to new start-level behaviour.
    </div>
  </div>

  <div class="note_group">
    <div class="note_name">bndtools</div>
    <div class="note_item">
      Changed the download URL for bnd and bndtools artifacts to the bndtools repo on github
    </div>
  </div>
  
</div>
